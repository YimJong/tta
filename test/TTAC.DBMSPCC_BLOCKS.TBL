DROP TABLE TTAC.DBMSPCC_BLOCKS CASCADE CONSTRAINTS;

CREATE GLOBAL TEMPORARY TABLE TTAC.DBMSPCC_BLOCKS
(
  RUN_ID        NUMBER(38),
  OBJECT_ID     NUMBER(38),
  BLOCK         NUMBER(38),
  LINE          NUMBER(38) CONSTRAINT DBMSPCC_BLOCKS_LINE_NN NOT NULL,
  COL           NUMBER(38) CONSTRAINT DBMSPCC_BLOCKS_COL_NN NOT NULL,
  COVERED       NUMBER(1) CONSTRAINT DBMSPCC_BLOCKS_COVERED_NN NOT NULL,
  NOT_FEASIBLE  NUMBER(1) CONSTRAINT DBMSPCC_BLOCKS_NOT_FEASIBLE_NN NOT NULL
)
ON COMMIT PRESERVE ROWS
NOCACHE;


CREATE UNIQUE INDEX TTAC.DBMSPCC_BLOCKS_PK ON TTAC.DBMSPCC_BLOCKS
(RUN_ID, OBJECT_ID, BLOCK);

ALTER INDEX TTAC.DBMSPCC_BLOCKS_PK
  MONITORING USAGE;

ALTER TABLE TTAC.DBMSPCC_BLOCKS ADD (
  CONSTRAINT DBMSPCC_BLOCKS_BLOCK_CK
  CHECK ( block >= 0 )
  ENABLE VALIDATE
,  CONSTRAINT DBMSPCC_BLOCKS_COL_CK
  CHECK ( col >= 0 )
  ENABLE VALIDATE
,  CONSTRAINT DBMSPCC_BLOCKS_COVERED_CK
  CHECK ( covered in ( 0, 1 ) )
  ENABLE VALIDATE
,  CONSTRAINT DBMSPCC_BLOCKS_LINE_CK
  CHECK ( line >= 0 )
  ENABLE VALIDATE
,  CONSTRAINT DBMSPCC_BLOCKS_NOT_FEASIBLE_CK
  CHECK ( not_feasible in ( 0, 1 ) )
  ENABLE VALIDATE
,  CONSTRAINT DBMSPCC_BLOCKS_PK
  PRIMARY KEY
  (RUN_ID, OBJECT_ID, BLOCK)
  USING INDEX TTAC.DBMSPCC_BLOCKS_PK
  ENABLE VALIDATE);


CREATE OR REPLACE PUBLIC SYNONYM DBMSPCC_BLOCKS FOR TTAC.DBMSPCC_BLOCKS;


GRANT DELETE, INSERT, SELECT, UPDATE ON TTAC.DBMSPCC_BLOCKS TO PUBLIC;
