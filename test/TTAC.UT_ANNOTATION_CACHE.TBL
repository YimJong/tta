DROP TABLE TTAC.UT_ANNOTATION_CACHE CASCADE CONSTRAINTS;

CREATE TABLE TTAC.UT_ANNOTATION_CACHE
(
  CACHE_ID             NUMBER(20)               NOT NULL,
  ANNOTATION_POSITION  NUMBER(5)                NOT NULL,
  ANNOTATION_NAME      VARCHAR2(1000 BYTE)      NOT NULL,
  ANNOTATION_TEXT      VARCHAR2(4000 BYTE),
  SUBOBJECT_NAME       VARCHAR2(250 BYTE)
)
TABLESPACE USERS
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE;


CREATE UNIQUE INDEX TTAC.UT_ANNOTATION_CACHE_PK ON TTAC.UT_ANNOTATION_CACHE
(CACHE_ID, ANNOTATION_POSITION)
LOGGING
TABLESPACE USERS
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );

ALTER INDEX TTAC.UT_ANNOTATION_CACHE_PK
  MONITORING USAGE;

ALTER TABLE TTAC.UT_ANNOTATION_CACHE ADD (
  CONSTRAINT UT_ANNOTATION_CACHE_PK
  PRIMARY KEY
  (CACHE_ID, ANNOTATION_POSITION)
  USING INDEX TTAC.UT_ANNOTATION_CACHE_PK
  ENABLE VALIDATE);


CREATE INDEX TTAC.UT_ANNOTATION_CACHE_FK ON TTAC.UT_ANNOTATION_CACHE
(CACHE_ID)
LOGGING
TABLESPACE USERS
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           );

ALTER INDEX TTAC.UT_ANNOTATION_CACHE_FK
  MONITORING USAGE;

ALTER TABLE TTAC.UT_ANNOTATION_CACHE ADD (
  CONSTRAINT UT_ANNOTATION_CACHE_FK 
  FOREIGN KEY (CACHE_ID) 
  REFERENCES TTAC.UT_ANNOTATION_CACHE_INFO (CACHE_ID)
  ON DELETE CASCADE
  ENABLE VALIDATE);
